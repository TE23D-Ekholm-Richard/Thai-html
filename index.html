<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thai Alphabet Quiz</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            text-align: center; 
            padding: 20px; 
            background-color: #f4f4f4;
        }
        .quiz-container { 
            max-width: 500px; 
            margin: auto; 
            padding: 20px; 
            border-radius: 10px; 
            background-color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        button { 
            margin-top: 10px; 
            padding: 8px 16px; 
            cursor: pointer; 
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
        #question {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .thai-symbol {
            font-size: 60px; /* Default size of Thai symbols */
            color: #d35400;
        }
        .thai-symbol.sound-mode {
            font-size: 80px; /* Larger size for Thai symbols in Sound Mode */
        }
        input {
            padding: 8px;
            font-size: 16px;
            width: 80%;
            margin-top: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        #feedback {
            margin-top: 10px; 
            font-weight: bold; 
            font-size: 18px;
        }
        .correct {
            color: green;
        }
        .incorrect {
            color: red;
        }
        select {
            padding: 8px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ccc;
            margin: 5px;
            background-color: white;
            cursor: pointer;
        }
        #preview {
            margin-top: 15px;
            font-size: 20px;
            font-weight: bold;
        }
        #alphabet-table {
            margin-top: 20px;
            width: 80%;
            margin: auto;
            border-collapse: collapse;
        }
        #alphabet-table th, #alphabet-table td {
            padding: 10px;
            border: 1px solid #ddd;
        }
        #alphabet-table th {
            background-color: #f2f2f2;
        }
        #alphabet-table td {
            text-align: center;
        }
        #alphabet-container {
            display: none; /* Initially hide the alphabet table */
            margin-top: 20px;
        }
        .option-button {
            font-size: 30px;
            padding: 15px;
            margin: 5px;
            min-width: 60px;
            background-color: #3498db;
        }
        .option-button:hover {
            background-color: #2980b9;
        }
        #options-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        #text-input-container {
            display: none;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h2>Thai Alphabet Quiz</h2>
        <label for="mode">Select mode:</label>
        <select id="mode" onchange="updatePreview()">
            <option value="consonants">Consonants</option>
            <option value="vowels">Vowels</option>
            <option value="match-symbol">Match the Symbol</option>
        </select>
        <label for="range">Select range:</label>
        <select id="range" onchange="updatePreview()">
            <option value="5">First 5</option>
            <option value="next5">Next 5</option>
            <option value="10">First 10</option>
            <option value="15">First 15</option>
            <option value="20">First 20</option>
            <option value="25">First 25</option>
            <option value="all">Full Set</option>
        </select>
        <p id="preview">Selected Letters: (Select mode and range)</p>
        <button onclick="startQuiz()">Start Quiz</button>
        <p id="question">Press Start to Begin</p>
        <p class="thai-symbol" id="thai-symbol"></p>
        
        <div id="options-container"></div>
        
        <div id="text-input-container">
            <input type="text" id="answer" placeholder="Your answer here" onkeypress="handleKeyPress(event)" autofocus />
            <button onclick="submitAndNext()">Submit & Next</button>
        </div>
        
        <p id="score">Score: 0</p>
        <p id="feedback"></p>
        
        <button onclick="showAlphabet()">Show Full Thai Alphabet</button>

        <div id="alphabet-container">
            <h3>Thai Alphabet</h3>
            <table id="alphabet-table">
                <thead>
                    <tr>
                        <th>Consonants</th>
                        <th>Pronunciation</th>
                        <th>Vowels</th>
                        <th>Pronunciation</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="2">Consonants</td>
                        <td colspan="2">Vowels</td>
                    </tr>
                    <tr>
                        <td rowspan="5" id="consonant-column"></td>
                        <td rowspan="5" id="vowel-column"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        let selectedSet = [];
        let currentQuestion = "";
        let previousQuestion = null;
        let score = 0;
        let currentOptions = [];

        const thaiConsonants = [
            ["ก", "k"], ["ข", "kh"], ["ค", "kh"], ["ง", "ng"], ["จ", "j"], ["ฉ", "ch"], ["ช", "ch"], ["ซ", "s"], ["ฌ", "ch"], ["ญ", "y"],
            ["ฎ", "d"], ["ฑ", "th"], ["ฒ", "th"], ["ณ", "n"], ["ด", "d"], ["ต", "t"], ["ถ", "th"], ["ท", "th"], ["ธ", "th"], ["น", "n"],
            ["บ", "b"], ["ป", "p"], ["ผ", "ph"], ["ฝ", "f"], ["พ", "ph"], ["ฟ", "f"], ["ภ", "ph"], ["ม", "m"], ["ย", "y"], ["ร", "r"],
            ["ล", "l"], ["ว", "w"], ["ศ", "s"], ["ษ", "s"], ["ส", "s"], ["ห", "h"], ["ฬ", "l"], ["อ", "o"], ["ฮ", "h"]
        ];
        
        const thaiVowels = [
            ["อะ", "a"], ["อา", "aa"], ["อิ", "i"], ["อี", "ii"], ["อึ", "ue"], ["อื", "uee"], ["อุ", "u"], ["อู", "uu"], ["เอะ", "e"], ["เอ", "ee"],
            ["แอะ", "ae"], ["แอ", "aae"], ["โอะ", "o"], ["โอ", "oo"], ["เอาะ", "aw"], ["ออ", "aw"], ["เออ", "oe"], ["ออ", "or"], ["อัว", "ua"],
            ["อิอิ", "ii"], ["อือ", "ue"], ["อุอุ", "uu"], ["อะ", "a"], ["อา", "aa"]
        ];

        function updatePreview() {
            const mode = document.getElementById("mode").value;
            const range = document.getElementById("range").value;

            let previewSet = [];

            if (mode === "consonants") {
                if (range === "5") {
                    previewSet = thaiConsonants.slice(0, 5);
                } else if (range === "next5") {
                    previewSet = thaiConsonants.slice(5, 10);
                } else if (range === "10") {
                    previewSet = thaiConsonants.slice(0, 10);
                } else if (range === "15") {
                    previewSet = thaiConsonants.slice(0, 15);
                } else if (range === "20") {
                    previewSet = thaiConsonants.slice(0, 20);
                } else if (range === "25") {
                    previewSet = thaiConsonants.slice(0, 25);
                } else if (range === "all") {
                    previewSet = thaiConsonants;
                }
                // Show Thai letters for consonant mode
                document.getElementById("preview").innerText = "Selected Letters: " + previewSet.map(item => item[0]).join(", ");
            } else if (mode === "vowels") {
                if (range === "5") {
                    previewSet = thaiVowels.slice(0, 5);
                } else if (range === "next5") {
                    previewSet = thaiVowels.slice(5, 10);
                } else if (range === "10") {
                    previewSet = thaiVowels.slice(0, 10);
                } else if (range === "15") {
                    previewSet = thaiVowels.slice(0, 15);
                } else if (range === "20") {
                    previewSet = thaiVowels.slice(0, 20);
                } else if (range === "25") {
                    previewSet = thaiVowels.slice(0, 25);
                } else if (range === "all") {
                    previewSet = thaiVowels;
                }
                // Show Thai letters for vowel mode
                document.getElementById("preview").innerText = "Selected Letters: " + previewSet.map(item => item[0]).join(", ");
            } else if (mode === "match-symbol") {
                if (range === "5") {
                    previewSet = [...thaiConsonants, ...thaiVowels].slice(0, 5);
                } else if (range === "next5") {
                    previewSet = [...thaiConsonants, ...thaiVowels].slice(5, 10);
                } else if (range === "10") {
                    previewSet = [...thaiConsonants, ...thaiVowels].slice(0, 10);
                } else if (range === "15") {
                    previewSet = [...thaiConsonants, ...thaiVowels].slice(0, 15);
                } else if (range === "20") {
                    previewSet = [...thaiConsonants, ...thaiVowels].slice(0, 20);
                } else if (range === "25") {
                    previewSet = [...thaiConsonants, ...thaiVowels].slice(0, 25);
                } else if (range === "all") {
                    previewSet = [...thaiConsonants, ...thaiVowels];
                }
                // Show romanized letters for match-symbol mode
                document.getElementById("preview").innerText = "Selected Letters: " + previewSet.map(item => item[1]).join(", ");
            }
        }

        function startQuiz() {
            const mode = document.getElementById("mode").value;
            const range = document.getElementById("range").value;
            let fullSet = [];

            if (mode === "consonants") {
                fullSet = thaiConsonants;
            } else if (mode === "vowels") {
                fullSet = thaiVowels;
            } else if (mode === "match-symbol") {
                fullSet = [...thaiConsonants, ...thaiVowels];
            }

            if (range === "5") {
                selectedSet = fullSet.slice(0, 5);
            } else if (range === "next5") {
                selectedSet = fullSet.slice(5, 10);
            } else if (range === "10") {
                selectedSet = fullSet.slice(0, 10);
            } else if (range === "15") {
                selectedSet = fullSet.slice(0, 15);
            } else if (range === "20") {
                selectedSet = fullSet.slice(0, 20);
            } else if (range === "25") {
                selectedSet = fullSet.slice(0, 25);
            } else {
                selectedSet = fullSet;
            }

            score = 0;
            document.getElementById("score").innerText = "Score: " + score;
            
            // Show/hide appropriate UI elements based on mode
            if (mode === "match-symbol") {
                document.getElementById("options-container").style.display = "flex";
                document.getElementById("text-input-container").style.display = "none";
            } else {
                document.getElementById("options-container").style.display = "none";
                document.getElementById("text-input-container").style.display = "block";
            }
            
            nextQuestion();
        }

        function generateOptions(correctItem) {
            let options = [correctItem];
            let allItems = [...thaiConsonants, ...thaiVowels];
            
            // Remove the correct item from the pool
            allItems = allItems.filter(item => item[0] !== correctItem[0] && item[1] !== correctItem[1]);
            
            // Shuffle the array and pick 3 random items
            for (let i = 0; i < 3; i++) {
                const randomIndex = Math.floor(Math.random() * allItems.length);
                options.push(allItems[randomIndex]);
                allItems.splice(randomIndex, 1); // Remove the selected item to avoid duplicates
            }
            
            // Shuffle the options
            return options.sort(() => Math.random() - 0.5);
        }

        function nextQuestion() {
            if (selectedSet.length === 0) return;

            let randomIndex;
            let newQuestion;

            do {
                randomIndex = Math.floor(Math.random() * selectedSet.length);
                newQuestion = selectedSet[randomIndex];
            } while (newQuestion === previousQuestion);

            currentQuestion = newQuestion;
            previousQuestion = currentQuestion;

            const mode = document.getElementById("mode").value;
            const questionElement = document.getElementById("question");
            const symbolElement = document.getElementById("thai-symbol");
            const optionsContainer = document.getElementById("options-container");

            if (mode === "match-symbol") {
                questionElement.innerText = "What is the Thai symbol for:";
                symbolElement.innerText = currentQuestion[1];
                
                // Generate and display options
                currentOptions = generateOptions(currentQuestion);
                optionsContainer.innerHTML = "";
                
                currentOptions.forEach((option, index) => {
                    const button = document.createElement("button");
                    button.className = "option-button";
                    button.innerText = option[0];
                    button.onclick = () => checkAnswer(option[0]);
                    optionsContainer.appendChild(button);
                });
            } else {
                questionElement.innerText = "What is the Romanized pronunciation of:";
                symbolElement.innerText = currentQuestion[0];
            }

            document.getElementById("answer").value = "";
            document.getElementById("answer").focus();
            document.getElementById("feedback").innerText = "";
        }

        function checkAnswer(selectedSymbol) {
            const feedbackElement = document.getElementById("feedback");
            
            if (selectedSymbol === currentQuestion[0]) {
                feedbackElement.innerText = "Correct!";
                feedbackElement.className = "correct";
                score++;
            } else {
                feedbackElement.innerText = `Incorrect! Correct answer: ${currentQuestion[0]}`;
                feedbackElement.className = "incorrect";
            }

            document.getElementById("score").innerText = "Score: " + score;
            setTimeout(nextQuestion, 1000);
        }

        function submitAndNext() {
            const answerInput = document.getElementById("answer").value.trim().toLowerCase();
            let correctAnswer = currentQuestion[1].toLowerCase();

            const feedbackElement = document.getElementById("feedback");

            if (answerInput === correctAnswer.toLowerCase()) {
                feedbackElement.innerText = "Correct!";
                feedbackElement.className = "correct";
                score++;
            } else {
                feedbackElement.innerText = `Incorrect! Correct answer: ${correctAnswer}`;
                feedbackElement.className = "incorrect";
            }

            document.getElementById("score").innerText = "Score: " + score;
            setTimeout(nextQuestion, 1000);
        }

        function handleKeyPress(event) {
            if (event.key === "Enter") {
                submitAndNext();
            }
        }

        function showAlphabet() {
            const consonantColumn = document.getElementById('consonant-column');
            const vowelColumn = document.getElementById('vowel-column');
            
            consonantColumn.innerHTML = thaiConsonants.map(item => `<div>${item[0]} (${item[1]})</div>`).join('');
            vowelColumn.innerHTML = thaiVowels.map(item => `<div>${item[0]} (${item[1]})</div>`).join('');
            
            document.getElementById('alphabet-container').style.display = 'block';
        }
    </script>
</body>
</html>